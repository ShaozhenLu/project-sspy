import{c as A,_ as ce,r as G,d as de,o as ue,a as pe,b as me,e as he,f as ve,g as e,t as K,u as E,h as J,P as H,i as W,j as F,s as Q,p as ge,k as fe,l as be,m as Z,n as ee}from"./index.d680abfe.js";import{l as z,a as _e,f as ye,e as xe}from"./linear.202d25e0.js";import{s as N,b as Se,a as De,c as we}from"./band.72277e65.js";function Pe(c){if(!c.ok)throw new Error(c.status+" "+c.statusText);return c.text()}function Ce(c,v){return fetch(c,v).then(Pe)}function Ee(c){return function(v,f,I){return arguments.length===2&&typeof f=="function"&&(I=f,f=void 0),Ce(v,f).then(function(T){return c(T,I)})}}var Ie=Ee(A);function Te(c){if(!c.ok)throw new Error(c.status+" "+c.statusText);if(!(c.status===204||c.status===205))return c.json()}function Le(c,v){return fetch(c,v).then(Te)}const s=c=>(ge("data-v-33c2ddf7"),c=c(),fe(),c),ke={class:"col-md-9 ms-sm-auto col-lg-10 px-md-4"},Ae=s(()=>e("br",null,null,-1)),Me={class:"container"},Ue=s(()=>e("h1",{class:"mt-3 green"},"SECTOR ROTATIONS",-1)),Be=s(()=>e("div",{class:"title"},"How different sector ETFs have moved historically.",-1)),Oe=s(()=>e("br",null,null,-1)),Re=s(()=>e("br",null,null,-1)),Ve=s(()=>e("br",null,null,-1)),Xe=s(()=>e("div",{id:"mlinechart"},null,-1)),je=s(()=>e("br",null,null,-1)),Ge=s(()=>e("hr",null,null,-1)),He=s(()=>e("br",null,null,-1)),We=s(()=>e("br",null,null,-1)),Fe={class:"container"},ze={class:"row"},Ne={class:"col"},Ye=s(()=>e("h1",{class:"mt-3 green"},"SECTOR PERFORMANCE",-1)),$e=s(()=>e("div",{class:"title"},"Daily Percentage change of each sector index",-1)),qe={class:"timeUpdate",id:"t2"},Ke=s(()=>e("br",null,null,-1)),Je={class:"input-group mb-3"},Qe=s(()=>e("div",{class:"input-group-prepend"},[e("label",{class:"input-group-text",for:"inputGroupSelect03"},"Select Date")],-1)),Ze=s(()=>e("div",{id:"barchart"},null,-1)),et=s(()=>e("div",{class:"col",id:"c2"},[e("h1",{class:"mt-3 green"},"SECTOR WEIGHT"),e("div",{class:"title"},"Index Weight and Amounts of Sector BreakDown in S&P 500"),e("br"),e("br"),e("br"),e("div",{id:"piechart"})],-1)),tt=s(()=>e("br",null,null,-1)),at=s(()=>e("hr",null,null,-1)),nt=s(()=>e("br",null,null,-1)),ot=s(()=>e("br",null,null,-1)),rt={class:"container"},st=s(()=>e("h1",{class:"mt-3 green"},"MARKET OVERVIEW",-1)),lt=s(()=>e("div",{class:"title"},"Overview of the biggest market cap stocks in each sector.",-1)),it={class:"timeUpdate",id:"t3"},ct=s(()=>e("br",null,null,-1)),dt={class:"input-group mb-3"},ut=s(()=>e("div",{class:"input-group-prepend"},[e("label",{class:"input-group-text",for:"inputGroupSelect02"},"Select Date")],-1)),pt={class:"input-group mb-3"},mt=s(()=>e("div",{class:"input-group-prepend"},[e("label",{class:"input-group-text",for:"inputGroupSelect01"},"Select Sector")],-1)),ht=be("<option data-v-33c2ddf7>S&amp;P 500</option><option data-v-33c2ddf7>Technology</option><option data-v-33c2ddf7>Health Care</option><option data-v-33c2ddf7>Financials</option><option data-v-33c2ddf7>Consumer Discretionary</option><option data-v-33c2ddf7>Communication Services</option><option data-v-33c2ddf7>Industrials</option><option data-v-33c2ddf7>Consumer Staples</option><option data-v-33c2ddf7>Energy</option><option data-v-33c2ddf7>Utilities</option><option data-v-33c2ddf7>Real Estate</option><option data-v-33c2ddf7>Materials</option>",12),vt=[ht],gt=s(()=>e("br",null,null,-1)),ft=s(()=>e("div",{id:"treechart"},null,-1)),bt={__name:"SectorOverview",setup(c){const v=G(new Date),f=G(new Date),I=de();function T(){var o=v.value.getTime()+864e5,t=document.getElementById("inputGroupSelect01").value;B(t,"treechart",o)}function M(){var o=f.value.getTime()+864e5;N("#barchart").selectAll("*").remove(),q("#barchart",o)}function L(o){$("mlinechart",o.target.value)}function te(o){var t=v.value.getTime()+864e5;B(o.target.value,"treechart",t)}function Y(o){return Math.floor(typeof o=="number"?o/1e3:o.getTime()/1e3)}function ae(o,t=new Date){let a=0;typeof t=="number"?a=t:a=t.getTime();let u=new Date(a-(o>0&&o?o:0)*86400*1e3),p=u.getFullYear(),r=u.getMonth()+1,l=u.getDate();return p+"-"+(r<9?"0"+r:r)+"-"+(l<9?"0"+l:l)}function U(o,t=new Date){return{params:{period1:Y(new Date(ae(o,t))),period2:Y(t),interval:"1d",events:"history",includeAdjustedClose:!0}}}function ne(o,t,a){return o==="S&P index(SPY)"?{type:"scatter",mode:"lines",name:o,x:t,y:a,line:{width:5,color:"black"},hovertemplate:"%{x}<br>%{y}"}:{type:"scatter",mode:"lines",name:o,x:t,y:a,hovertemplate:"%{x}<br>%{y}"}}function oe(o){Ie("sector_weight.csv").then(r=>{const a=r.map(i=>i.Sector),u=r.map(i=>i.Number);var r=[{type:"pie",values:r.map(i=>i["Index Weight"]),labels:a,text:u,textinfo:"label+percent",textposition:"inside",automargin:!0,hovertemplate:"<b>%{label}</b><br>Index Weight: %{percent}<br>Number: %{text}<br><extra></extra>"}],l={height:400,width:400,margin:{t:10,b:10,l:80,r:10},showlegend:!1};H.newPlot(o,r,l)})}function $(o,t){let a=[{name:"Information Technology",code:"XLK"},{name:"Health Care",code:"XLV"},{name:"Financials",code:"XLF"},{name:"Consumer Discretionary",code:"XLY"},{name:"Communication Services",code:"XLC"},{name:"Industrials",code:"XLI"},{name:"Consumer Staples",code:"XLP"},{name:"Energy",code:"XLE"},{name:"Utilities",code:"XLU"},{name:"Real Estate",code:"XLRE"},{name:"Materials",code:"XLB"},{name:"S&P index",code:"SPY"}];var u=a.map(l=>l.code);let p=[];u.forEach(l=>{p.push(W(l,U(180)).then(i=>A(i.data)))});var r=[];F.all(p).then(l=>{r.length===0&&(r=l[0].map(_=>_.Date).slice(-t));var i=[];a.forEach((_,m)=>{var g=l[m].map(h=>h["Adj Close"]),x=[0];for(let h=0;h<t-1;h++)x.push(g.slice(-t)[h+1]/g.slice(-t)[0]-1);var S=_.name+"("+_.code+")";i.push(ne(S,r,x))});var w={autosize:!0,width:1300,height:700,showlegend:!0,legend:{orientation:"h",x:-.05,y:1.22},xaxis:{title:"Date",autorange:!0,range:[r[0],r[r.length-1]],rangeslider:{range:[r[0],r[r.length-1]]},type:"date"},yaxis:{title:"Cumulative Change(%)",autorange:!0,type:"linear",tickformat:",.2%",range:[0,1]},title:{text:"Date: "+r[0]+" to "+r[r.length-1],font:{size:13},x:.92,y:.86}};H.newPlot(o,i,w)})}function B(o,t,a=new Date){Le("treemap_dict.json").then(u=>{var p=u[o].labels.slice(1);let r=[];p.forEach(l=>{r.push(W(l,U(10,a)).then(i=>A(i.data)))}),F.all(r).then(l=>{let i={};const w=l[0].slice(-1)[0].Date;p.forEach((d,D)=>{i[d]=l[D]});let _=[100];p.forEach(d=>{_.push(i[d].map(D=>D["Adj Close"]).slice(-1)[0]/i[d].map(D=>D["Adj Close"]).slice(-2)[0]-1)});var m=Array(u[o].labels.length).fill(o),g=z().domain([-.3,0]).range(["red","darkred"]),x=z().domain([0,.3]).range(["darkgreen","green"]);let S=_.map(d=>{if(d==100)return"white";if(d==0)return"lightgrey";if(d<0)return g(d);if(d>0)return x(d)});m[0]="";const h=[{type:"treemap",labels:u[o].labels,parents:m,values:u[o].mktcap,text:_.map(d=>d*100),texttemplate:"%{label}<br>%{text:.2f}%",hoverinfo:"label+text",hovertemplate:"%{label}<br>%{text:.2f}%<extra></extra>",textfont:{size:20},marker:{colors:S}}],P={autosize:!1,width:800,height:600,margin:{l:0,r:20,b:20,t:20,pad:4},title:{text:"Date:"+w,font:{size:15},x:.95,y:.93}};H.newPlot(t,h,P)})})}function q(o,t=new Date){var a=[{name:"Information Technology",code:"^SP500-45"},{name:"Health Care",code:"^SP500-35"},{name:"Financials",code:"^SP500-40"},{name:"Consumer Discretionary",code:"^SP500-25"},{name:"Communication Services",code:"^SP500-50"},{name:"Industrials",code:"^SP500-20"},{name:"Consumer Staples",code:"^SP500-30"},{name:"Energy",code:"^GSPE"},{name:"Utilities",code:"^SP500-55"},{name:"Real Estate",code:"^SP500-60"},{name:"Materials",code:"^SP500-15"}],u=a.map(l=>l.name),p=a.map(l=>l.code),r=[];p.forEach(l=>{r.push(W(l,U(5,t)).then(i=>A(i.data)))}),F.all(r).then(l=>{let i=new Object;p.forEach((n,y)=>{i[n]=l[y]});var w={};const _=i["^GSPE"][i["^GSPE"].length-1].Date;p.forEach(n=>{let y=i[n][i[n].length-1]["Adj Close"],C=i[n][i[n].length-2]["Adj Close"],le=a.find(ie=>ie.code===n).name;w[le]=(y-C)/C});var m=[];u.forEach((n,y)=>{let C={};C.name=n,C.rate=w[n],m[y]=C}),m.sort((n,y)=>_e(n.rate,y.rate));var g={top:40,right:10,bottom:50,left:150},x=500,S=300,h=N(o).append("svg").attr("width",x+g.left+g.right).attr("height",S+g.top+g.bottom).append("g").attr("transform","translate("+g.left+","+g.top+")"),P=Se().range([S,0]).padding(.1),d=z().range([0,x]);function D(){return Z(m,n=>n.rate)>0?[0,ee(m,n=>n.rate)]:ee(m,n=>n.rate)<0?[Z(m,n=>n.rate),0]:xe(m,n=>n.rate)}d.domain(D()),P.domain(m.map(n=>n.name));var re=De(d).ticks(8).tickFormat(ye(".1%")),se=we(P),j=N("body").append("div").attr("class","d3-tooltip").style("position","absolute").style("z-index","10").style("visibility","hidden").style("padding","10px").style("background","rgba(0,0,0,0.6)").style("border-radius","4px").style("color","#fff");h.append("g").selectAll(".bar").data(m).enter().append("rect").attr("class",n=>"bar bar--"+(n.rate<0?"negative":"positive")).attr("x",n=>d(Math.min(0,n.rate))).attr("y",n=>P(n.name)).attr("width",n=>Math.abs(d(n.rate)-d(0))).attr("height",P.bandwidth()).on("mouseover",function(n){j.style("visibility","visible")}).on("mousemove",function(n,y){j.style("top",n.pageY-5+"px").style("left",n.pageX+10+"px").html(`${y.name}<div>Percentage Change: ${(y.rate*100).toFixed(4)}%</div>`).style("font-size","12px")}).on("mouseout",function(){j.html("").style("visibility","hidden")}),h.append("g").attr("transform","translate(0,"+S+")").call(re),h.append("text").attr("text-anchor","middle").attr("x",x/2).attr("y",S+g.bottom*.8).text("Percentage Change"),h.append("g").attr("class","y axis").call(se).selectAll(".tick").data(m).select("text").attr("x",n=>n.rate-9).style("text-anchor","end").style("font-size","12px"),h.append("g").attr("font-size","15px").attr("fill","#333").attr("transform","translate(380, -20)").append("text").text("Date: "+_)})}function k(o=new Date){var t=new Date;if(o.toLocaleDateString("en-CA")!=t.toLocaleDateString("en-CA"))return console.log("select old day"),!1;if(t.getDay()%6){console.log("calculate time");var a="6:30:00",u="13:00:00",p=new Date(t.getTime());p.setHours(a.split(":")[0]),p.setMinutes(a.split(":")[1]),p.setSeconds(a.split(":")[2]);var r=new Date(t.getTime());r.setHours(u.split(":")[0]),r.setMinutes(u.split(":")[1]),r.setSeconds(u.split(":")[2]);var l=p<t&&r>t;return l}else return console.log("not trade day"),!1}let O=0,R=0,V=0,X=0,b=G(new Date().toLocaleString());return ue(()=>{console.log("On Mounted Start"),$("mlinechart",120),q("#barchart"),B("S&P 500","treechart"),oe("piechart"),k(f.value)&&(O=setInterval(()=>{console.log("bar timer started"),b=new Date().toLocaleString(),document.getElementById("t2").innerHTML="Update every 30 seconds in trade time (6:30 - 13:00 PST WD). Last update: "+b,M()},1e3*30)),k(v.value)&&(V=setInterval(()=>{console.log("tree timer started"),b=new Date().toLocaleString(),document.getElementById("t3").innerHTML="Update every 10 seconds in trade time (6:30 - 13:00 PST WD). Last update: "+b,T()},1e3*10))}),pe(()=>{console.log("on Updated Start"),console.log("time changed"),clearInterval(O),clearInterval(V),clearInterval(R),clearInterval(X),k(f.value)&&(R=setInterval(()=>{console.log("bar timer update"),b=new Date().toLocaleString(),document.getElementById("t2").innerHTML="Update every 30 seconds in trade time (6:30 - 13:00 PST WD). Last update: "+b,M()},1e3*30)),k(v.value)&&(X=setInterval(()=>{console.log("tree timer update"),b=new Date().toLocaleString(),document.getElementById("t3").innerHTML="Update every 10 seconds in trade time (6:30 - 13:00 PST WD). Last update: "+b,T()},1e3*10))}),me(()=>{console.log("Page exit, timer end"),clearInterval(O),clearInterval(V),clearInterval(R),clearInterval(X)}),(o,t)=>(he(),ve("main",ke,[Ae,e("div",Me,[Ue,Be,Oe,e("button",{type:"button",class:"btn btn-success me-2 btn-sm",value:"7",onClick:t[0]||(t[0]=a=>L(a))},"7D"),e("button",{type:"button",class:"btn btn-success me-2 btn-sm",value:"15",onClick:t[1]||(t[1]=a=>L(a))},"15D"),e("button",{type:"button",class:"btn btn-success me-2 btn-sm",value:"30",onClick:t[2]||(t[2]=a=>L(a))},"30D"),e("button",{type:"button",class:"btn btn-success me-2 btn-sm",value:"60",onClick:t[3]||(t[3]=a=>L(a))},"60D"),e("button",{type:"button",class:"btn btn-success me-2 btn-sm",value:"120",onClick:t[4]||(t[4]=a=>L(a))},"120D"),Re,Ve,Xe]),je,Ge,He,We,e("div",Fe,[e("div",ze,[e("div",Ne,[Ye,$e,e("div",qe,"Update every 30 seconds in trade time (6:30 - 13:00 PST WD). Last update: "+K(E(b)),1),Ke,e("div",Je,[Qe,J(E(Q),{modelValue:f.value,"onUpdate:modelValue":[t[5]||(t[5]=a=>f.value=a),M],disabledDates:{dates:E(I)}},null,8,["modelValue","disabledDates"])]),Ze]),et])]),tt,at,nt,ot,e("div",rt,[st,lt,e("div",it,"Update every 10 seconds in trade time (6:30 - 13:00 PST WD). Last update: "+K(E(b)),1),ct,e("div",dt,[ut,J(E(Q),{modelValue:v.value,"onUpdate:modelValue":[t[6]||(t[6]=a=>v.value=a),T],disabledDates:{dates:E(I)}},null,8,["modelValue","disabledDates"])]),e("div",pt,[mt,e("select",{class:"custom-select",id:"inputGroupSelect01",onChange:t[7]||(t[7]=a=>te(a))},vt,32)]),gt,ft])]))}},wt=ce(bt,[["__scopeId","data-v-33c2ddf7"]]);export{wt as default};
