import{_ as U,r as M,d as G,o as z,a as F,b as A,e as K,f as V,g as s,t as J,u as D,h as R,i as H,c as Z,j as q,m as Q,n as Y,P as W,s as $,p as x,k as ee}from"./index.dd694e84.js";import{l as I,e as w,a as te}from"./linear.d82ff156.js";const d=h=>(x("data-v-f5645420"),h=h(),ee(),h),ae={class:"col-md-9 ms-sm-auto col-lg-10 px-md-4"},oe=d(()=>s("br",null,null,-1)),ne={class:"container"},le=d(()=>s("h1",{class:"mt-3 green"},"Daily Global Stock Market Index ",-1)),se=d(()=>s("div",{class:"title"},"Overview of the stock index in the world ",-1)),ce={class:"timeUpdate",id:"t1"},re=d(()=>s("br",null,null,-1)),ie={class:"input-group mb-3"},de=d(()=>s("div",{class:"input-group-prepend"},[s("label",{class:"input-group-text",for:"inputGroupSelect03"},"Select Date")],-1)),ue=d(()=>s("div",{id:"mapchart"},null,-1)),me={__name:"GlobalMarket",setup(h){const r=M(new Date),k=G();function P(){var t=r.value.getTime()+864e5;g("mapchart",t)}function C(t){return Math.floor(typeof t=="number"?t/1e3:t.getTime()/1e3)}function L(t,o=new Date){let c=0;typeof o=="number"?c=o:c=o.getTime();let i=new Date(c-(t>0&&t?t:0)*86400*1e3),S=i.getFullYear(),e=i.getMonth()+1,n=i.getDate();return S+"-"+(e<9?"0"+e:e)+"-"+(n<9?"0"+n:n)}function B(t,o=new Date){return{params:{period1:C(new Date(L(t,o))),period2:C(o),interval:"1d",events:"history",includeAdjustedClose:!0}}}let u=[{name:"S&P 500",code:"^GSPC",country:"United States"},{name:"Dow Jones Industrial Average",code:"^DJI",country:"United States"},{name:"MOEX Russia Index",code:"IMOEX.ME",country:"Russia"},{name:"Nikkei 225",code:"^N225",country:"Japan"},{name:"SSE Composite Index",code:"000001.SS",country:"China"},{name:"FTSE 100",code:"^FTSE",country:"United Kingdom"},{name:"DAX PERFORMANCE-INDEX",code:"^GDAXI",country:"Germany"},{name:"CAC 40",code:"^FCHI",country:"France"},{name:"BEL 20",code:"^BFX",country:"Belgium"},{name:"S&P/ASX 200",code:"^AXJO",country:"Australia"},{name:"S&P BSE SENSEX",code:"^BSESN",country:"India"},{name:"Jakarta Composite Index",code:"^JKSE",country:"Indonesia"},{name:"FTSE Bursa Malaysia KLCI",code:"^KLSE",country:"Malaysia"},{name:"S&P/NZX 50 INDEX GROSS",code:"^NZ50",country:"New Zealand"},{name:"KOSPI Composite Index",code:"^KS11",country:"Korea"},{name:"IBOVESPA",code:"^BVSP",country:"Brazil"},{name:"IPC MEXICO",code:"^MXX",country:"Mexico"},{name:"S&P/TSX Composite index",code:"^GSPTSE",country:"Canada"}];function g(t,o=new Date){var c=u.map(e=>e.code);let i=[];c.forEach(e=>{i.push(H(e,B(5,o)).then(n=>Z(n.data)))});const S=u.map(e=>e.country);u.map(e=>e.position),u.map(e=>e.name),q.all(i).then(e=>{let n=[],y=[],p=[];u.forEach((l,a)=>{e[a].slice(-2)[0]["Adj Close"]==="null"?(n.push((e[a].slice(-1)[0]["Adj Close"]/e[a].slice(-1)[0].Open-1)*100),p.push(e[a].slice(-1)[0].Date),y.push(e[a].slice(-1)[0].Date+"<br>"+l.name+": "+e[a].slice(-1)[0]["Adj Close"])):e[a].slice(-1)[0]["Adj Close"]==="null"?(n.push((e[a].slice(-2)[0]["Adj Close"]/e[a].slice(-2)[0].Open-1)*100),p.push(e[a].slice(-2)[0].Date),y.push(e[a].slice(-2)[0].Date+"<br>"+l.name+": "+e[a].slice(-2)[0]["Adj Close"])):(n.push((e[a].slice(-2)[1]["Adj Close"]/e[a].slice(-2)[0]["Adj Close"]-1)*100),p.push(e[a].slice(-1)[0].Date),y.push(e[a].slice(-1)[0].Date+"<br>"+l.name+": "+e[a].slice(-1)[0]["Adj Close"]))});var v=I().domain(w(n)).range([0,1]);const _=n.slice().sort(te);var X=I().domain([-5,0]).range(["red","darkred"]),T=I().domain([0,5]).range(["darkgreen","green"]);let j=_.map(l=>{if(l==0)return[v(l),"lightgrey"];if(l<0)return[v(l),X(l)];if(l>0)return[v(l),T(l)]});var N=[{type:"choropleth",locationmode:"country names",locations:S,z:n,text:y,hoverinfo:"location+text+z",hovertemplate:"%{location}<br>%{text}<br>Change: %{z:.2f}%<extra></extra>",colorscale:j,autocolorscale:!1,zmin:Q(_),zmax:Y(_),marker:{line:{color:"white",width:2}},showscale:!1}],O={autosize:!0,width:1300,height:700,title:{text:"Date:"+w(p)[0]+" - "+w(p)[1],font:{size:15},x:.8,y:.92},geo:{showframe:!1,showland:!0,landcolor:"lightgrey",countrycolor:"lightgrey",coastlinecolor:"lightgrey",framecolor:"lightgrey",projection:{type:"robinson"}},margin:{l:0,r:200,b:0,t:30,pad:2}};W.newPlot(t,N,O,{showLink:!1})})}let f=0,E=0,m=M(new Date().toLocaleString());function b(t=new Date){var o=new Date;return t.toLocaleDateString("en-CA")!=o.toLocaleDateString("en-CA")?(console.log("select old day"),!1):!0}return z(()=>{console.log("On Mounted Start"),g("mapchart"),b(r.value)&&(f=setInterval(()=>{console.log("1"),g("mapchart"),m=new Date().toLocaleString(),document.getElementById("t1").innerHTML="Live Update every 30 seconds. Last update: "+m},1e3*30))}),F(()=>{console.log("on Updated Start"),clearInterval(f),b(r.value)&&(E=setInterval(()=>{console.log("2");var t=r.value.getTime()+24*60*60*1e3;g("mapchart",t),m=new Date().toLocaleString(),document.getElementById("t1").innerHTML="Live Update every 30 seconds. Last update: "+m},1e3*30))}),A(()=>{console.log("Page exit, timer end"),clearInterval(f),clearInterval(E)}),(t,o)=>(K(),V("main",ae,[oe,s("div",ne,[le,se,s("div",ce,"Live Update every 30 seconds. Last update: "+J(D(m)),1),re,s("div",ie,[de,R(D($),{modelValue:r.value,"onUpdate:modelValue":[o[0]||(o[0]=c=>r.value=c),P],disabledDates:{dates:D(k)}},null,8,["modelValue","disabledDates"])]),ue])]))}},ge=U(me,[["__scopeId","data-v-f5645420"]]);export{ge as default};
